# 幹事向け飲み会管理サービス

---

## 1. サービス概要

本サービスは、
飲み会の「日程調整 → 当日の出席管理 → 会計 → 支払申請・承認」までを一気通貫で管理できる、幹事向けWebサービスである。
- 参加者はログイン不要で、イベントURLのみで利用する
- 幹事はログイン必須でイベントを管理する
- システム内決済は行わず、支払状況の申請・承認・可視化に特化する

---

## 2. ユーザー種別と認証

### 2.1 幹事
- ログイン必須
- 認証方法
  - メールアドレス＋パスワード
  - Googleログイン
- 以下のいずれかでイベント編集が可能
  - イベント作成ユーザー（ログイン）
  - イベント作成端末（同一ブラウザ）

### 2.2 参加者
- ログイン不要
- イベントURLを知っていれば利用可能

---

## 3. 全体利用フロー
1. 幹事がイベントを作成する
2. 参加者がイベントURLから日程投票を行う
3. 幹事が日程を確定する
4. 当日、幹事が実出席者を確定する（飛び入り含む）
5. 幹事が会計を入力し、割り勘を確定する
6. 実出席者が出席一覧から支払申請を行う
7. 幹事に通知が届く
8. 幹事が申請を承認し、支払完了となる

---

## 4. イベント作成（幹事）
- イベント名を設定できる
- 候補日を複数登録できる（日時）
- メモ（任意）を設定できる
- イベント作成後、参加者用イベントURLを発行する
- イベントURLは推測困難な文字列とする

---

## 5. 日程投票（参加者）

### 5.1 投票内容
- 名前
- 各候補日に対する ◯ / △ / ✕
- コメント（任意）

### 5.2 投票仕様
- 同じ名前の投票は複数存在してよい
- 投票一覧は誰でも閲覧可能
- 投票の編集・削除は誰でも可能
- 一覧の名前をクリックすると、同一ページ下部に編集フォームを表示
- ページ遷移は行わない

### 5.3 投票締切
- 幹事は投票を締切できる
- 締切中は以下を禁止する
  - 新規投票
  - 投票の編集
  - 投票の削除
- 幹事は締切を解除できる

---

## 6. 投票通知（幹事）
- 新規投票が登録されたタイミングのみ、幹事にメール通知を送信する
- 投票の編集・削除では通知しない
- 通知先はイベント作成者の登録メールアドレスとする

---

## 7. 日程確定（幹事）
- 幹事は候補日から1つを確定日として選択できる
- 確定後、参加者リストを自動生成する
  - ◯ または △：参加者として含める
  - ✕：含めない

---

## 8. 当日出席管理（幹事）
- 幹事は参加者リストを表示できる
- 幹事がチェックした人を実出席者とする
- 参加者側の承認操作は不要
- 飛び入り参加者を追加できる

---

## 9. 出席一覧（共通）
- 出席一覧はイベントURL内に表示する
- 参加者ごとの状態を一覧で確認できる

| 列 | 内容 |
| --- | --- |
| 名前 | 参加者名 |
| 出席 | 実出席の有無 |
| 支払い | 支払申請ステータスまたは申請リンク |

---

## 10. 会計管理（幹事）
- 幹事は合計金額を入力できる
- 対象人数は実出席者のみ
- 均等割りで1人あたり金額を自動計算する
- 端数は切り上げとする
- 幹事は参加者ごとの支払金額を調整できる
- 幹事が「会計確定」を行うまで、支払申請はできない

---

## 11. 支払申請（参加者）

### 11.1 対象
- 実出席者のみ申請可能

### 11.2 支払方法
以下から1つ選択する（必須）
- 現金
- PayPay
- 振込
- その他

### 11.3 支払ステータス
- 未申請（初期状態）
- 申請中
- 承認済み

### 11.4 操作ルール

参加者
- 未申請 → 申請中 に変更できる
- 申請中は支払方法の変更・申請取消が可能
- 承認済み後は操作不可

幹事
- 申請中 → 承認済み に変更できる
- 差し戻し（未申請へ戻す）が可能

---

## 12. 支払通知（幹事）
- 支払ステータスが未申請 → 申請中に変わったタイミングで通知する
- 通知先はイベント作成者の登録メールアドレスとする

---

## 13. 支払管理（幹事）
- 幹事は全実出席者の支払方法・支払ステータスを一覧で確認できる
- 未申請者が一目で分かるUIを提供する

---

## 14. 権限ルール一覧

| 操作 | 幹事 | 参加者 |
| --- | --- | --- |
| イベント作成 | ○ | × |
| 投票 | ○ | ○ |
| 投票締切 | ○ | × |
| 日程確定 | ○ | × |
| 出席確定 | ○ | × |
| 会計入力 | ○ | × |
| 支払申請 | × | ○（実出席者のみ） |
| 支払承認 | ○ | × |

---

## 15. 例外・制約
- 投票締切後は投票操作を行えない
- 非出席者は支払申請できない
- 会計未確定の状態では支払申請できない
- 承認済みの支払は編集できない

---

## 16. データの概念単位

本サービスでは以下の概念を扱う。
- Event
- CandidateDate
- Vote
- Attendance
- Payment

---

## 17. 非機能要件（最低限）
- PCおよびスマートフォンのWebブラウザで利用可能
- 参加者はログイン不要
- メール通知は即時送信を試みる（厳密な到達保証はしない）

---

## 18. やらないこと
- システム内決済機能は実装しない
- モバイルアプリ化は行わない
- 参加者同士のメッセージ機能は持たない
- 同姓同名の厳密な識別は行わない

---

## 19. サービスの一言定義

「調整さんで決めた飲み会を、当日とお金まで“ちゃんと終わらせる”幹事専用ツール」
